---
title: 单链表（如何轻松写出正确的链表代码）
date: 2022-11-06 17:28:42
tags: 数据结构
comments: true
index_img: /assets/iron_man.JPG
---

链表的基础知识其实很简单，但是要写出好的链表代码不是容易的事儿，尤其是那些复杂的链表操作，比如链表反转、有序链表合并，写的时候很容易出错。里面有很多指针
的指向，很容易搞得晕头转向，所以面试官也非常喜欢用链表来考察候选人。

为什么链表代码这么难写？究竟怎样才能比较轻松地写出正确的链表代码呢？

下面几个**技巧**可以帮助你。来看下吧

## 技巧一：警惕指针丢失

我们在写链表代码的时候，指针指来指去，一会儿就不知道指针指哪里去了，所有我们一定要注意不要丢了指针。

{% img  /assets/linkedlist.png '"单链表" "注意指针的指向"' %}

如图所示，我们希望在结点 a 和相邻的结点 b 之间插入结点 c，如果我们将代码实现变成下面这个样子，就会发生指针丢失

```javascript
a.next = c; // 将a的next指针指向c结点；
c.next = a.next; // 将c的结点的next指针指向b结点；
```

初学者经常会在这儿犯错。a.next 指针在完成第一步操作之后，已经不再指向结点 b 了，而是指向结点 c。第 2 行代码相当于将 c 赋值给 c.next，自己指向自己。因此，整个链表也就断成了两半，从结点 b 往后的所有结点都无法访问到了。
所以，我们插入结点时，一定要注意操作的顺序，要先将结点 c 的 next 指针指向结点 b，再把结点 a 的 next 指针指向结点 c，这样才不会丢失指针，导致内存泄漏。所以，对于刚刚的插入代码，我们只需要把第 1 行和第 2 行代码的顺序颠倒一下就可以了。

## 技巧二：举例画图，辅助思考

对于稍微复杂的链表操作，单链表反转，指针一会儿指这，一会儿指那，一会儿就被绕晕了。总感觉脑容量不够，想不清楚。所以这个时候就要使用大招了，画图法。
你可以找一个具体的例子，把它画在纸上，释放一些脑容量，留更多的给逻辑思考，这样就会感觉到思路清晰很多。比如往单链表中插入一个数据这样一个操作，我一般都是把各种情况都举一个例子，画出插入前和插入后的链表变化。

## 技巧三： 注意边界问题

代码在一些边界或者异常情况下，最容易产生 Bug。链表代码也不例外。要实现没有 Bug 的链表代码，一定要在编写的过程中以及编写完成之后，检查边界条件是否考虑全面，以及代码在边界条件下是否能正确运行。

- 如果链表为空时，代码是否能正常工作？
- 如果链表只包含一个结点时，代码是否能正常工作？
- 如果链表只包含两个结点时，代码是否能正常工作？
- 代码逻辑在处理头结点和尾结点的时候，是否能正常工作？

5 个常见的单链表的操作:

1. 单链表反转
2. 链表中环的检测
3. 两个有序的链表合并
4. 删除链表倒数第 n 个结点
5. 求链表的中间结点

完整的单链表例子：
{% include_code lang:typescript linklist.ts %}
